<Window x:Class="JsonBuilder.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:JsonBuilder.ViewModels"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:mdc="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="JSON Builder" Height="650" Width="900">

    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="250"/>
        </Grid.RowDefinitions>

        <!-- 消息类型选择 -->
        <ComboBox ItemsSource="{Binding MessageTypes}"
                  SelectedItem="{Binding SelectedMessageType}"
                  materialDesign:HintAssist.Hint="Select message type"
                  Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                  Margin="0 0 0 10">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding DisplayName}"/>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>

        <!-- 动态参数表单 -->
        <ContentControl Grid.Row="1" 
                        Content="{Binding CurrentMessage}"
                        ContentTemplateSelector="{StaticResource MessageTemplateSelector}"/>

        <!-- 操作按钮 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Add Nested" 
                    Command="{Binding AddNestedItemCommand}"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Margin="0 0 10 0"
                    ToolTip="Add a nested item for nested JSON generation"/>

            <Button Content="Generate JSON" 
                    Command="{Binding GenerateJsonCommand}"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    ToolTip="Generate the JSON based on the current input"/>
        </StackPanel>

        <!-- JSON 输出窗口 -->
        <mdc:Card Grid.Row="3" Margin="0 15">
            <ScrollViewer>
                <TextBox Text="{Binding OutputJson, Mode=OneWay}"
                Style="{StaticResource MaterialDesignOutlinedTextBox}"
                FontFamily="Consolas"
                IsReadOnly="True"
                AcceptsReturn="True"
                VerticalScrollBarVisibility="Auto"/>
            </ScrollViewer>
        </mdc:Card>
        
    </Grid>
</Window>